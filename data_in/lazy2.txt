#include "data_in/printy.txt"
#include "data_in/consolescreen.txt"
#include "data_in/class_screen.txt"

int infloop() 
	int I = 0;
	while(1)
		writePort(7, I++);
	end 
end

void writePort(int port, int val)
   char* mem_port = 65536;
   mem_port[port] = val;
end

void printXY(char *str, int X, int Y)
	int *scr_adr = AdrScreen;//65536+100;
	while(*str)
		char C = *str++;
		int adr = (X+30*Y)*2;
		scr_adr[adr] = C;
		scr_adr[adr+1] = 999;
		X++;
	end
end

//int numOfPrint = 0;
int printX = 0;

void print(char *str)
	//printXY(str, 0, 0);
	printXY(str, printX, 0);
	printX = printX + strlen(str);
	//numOfPrint++;
	//my_num++;
	//if(numOfPrint > 19) numOfPrint = 0; end
end

void printnum2(int num)
	if(num < 0) print("(<0)"); end
	if(num == 0) print("(0)"); end
	if(num == 1) print("(1)"); end
	if(num == 2) print("(2)"); end
	if(num == 3) print("(3)"); end
	if(num == 4) print("(4)"); end
	if(num == 5) print("(5)"); end
	if(num == 6) print("(6)"); end
	if(num == 7) print("(7)"); end
	if(num == 8) print("(8)"); end
	if(num == 9) print("(9)"); end
	if(num == 10) print("(10)"); end
	if(num > 10) print("(>10)"); end
end

void printc(char c)
	char arr[2];
	arr[0] = c;
	arr[1] = 0;
	print(arr);
end

void printnl()
	printX = printX+30 - (printX%30);
end

void dbgprint(char *str10, int num10, char c10)
	print(str10);
	printnum2(num10);
	print("["); printc(c10); print("]");
	printnl();
end

void delay(int n)
	float trap;
	trap = 1000;
	//for(int i = 0; i < n*k; i++)
	//end
end

int main(int argc, char **argv)
	class Screen scr;
    screen_set(65536+100);
	screen_clear();
	print ("hello world! ");
	print ("another hello"); printnl();
	print("num 5 = "); printnum2(5); print(", ok"); printnl();
	print("char S = ["); printc('S'); print("]"); printnl();
	print("ok.");
	delay(1000);
	screen_clear();
	//setPrintCursor(0,2);
	Prints("ohai ",999); Printn(123,999); Prints(" yep",999);
	//printf("printf test1    ");
	//printf("printf %d test2", 123);
	//printf("printf %f test3", 21/4);
	//printf("printf %s test4", "hello");
	//writePort(0, &scr);
	//writePort(1, &(scr.X));
	//writePort(2, &scr.X);
	//writePort(3, scr.X);
	//scr.X = 123;
	//scr.print("hello world!");
	//scr.test();
	//writePort(6, scr.X);
	//print("well, I tried", 0, 0);
	//for(int i = 0; i < 10; i ++)
	//	char *str = lorem_ipsum(i);
	//	printXY(str, 0, i);
	//end
	printXY("done", 0, 11);
	infloop();
end

